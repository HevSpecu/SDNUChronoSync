---
import DashboardLayout from '../../layouts/DashboardLayout.astro';
const title = '团队视图';
const description = '查看所有团队的聚合课表';
---

<DashboardLayout title={title} description={description}>
  <div id="all-teams-view-app"></div>

  <script>
    import { createApp } from 'vue';
    import { createPinia } from 'pinia';
    import AllTeamsViewPage from '@/components/AllTeamsViewPage.vue';

    // Get preselected team ID from URL query parameters
    const urlParams = new URLSearchParams(window.location.search);
    const preselectedTeamId = urlParams.get('teamId') ? parseInt(urlParams.get('teamId')) : undefined;

    // Create Vue app
    const pinia = createPinia();
    const app = createApp(AllTeamsViewPage, {
      preselectedTeamId: preselectedTeamId
    });
    app.use(pinia);

    // Mount when DOM is ready
    document.addEventListener('DOMContentLoaded', () => {
      app.mount('#all-teams-view-app');
    });
  </script>
</DashboardLayout>