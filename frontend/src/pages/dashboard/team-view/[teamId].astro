---
import DashboardLayout from '../../../layouts/DashboardLayout.astro';

export const prerender = false;

const title = `团队课表视图`;
const description = '查看团队成员的聚合课表';
---

<DashboardLayout title={title} description={description}>
  <div id="team-view-app"></div>

  <script>
    import { createApp } from 'vue';
    import { createPinia } from 'pinia';
    import TeamViewPage from '@/components/TeamViewPage.vue';

    // Get team ID from URL
    const pathParts = window.location.pathname.split('/');
    const teamId = parseInt(pathParts[pathParts.length - 1]);

    if (isNaN(teamId)) {
      window.location.href = '/dashboard/my-teams';
    } else {
      // Create Vue app
      const pinia = createPinia();
      const app = createApp(TeamViewPage, {
        teamId: teamId
      });
      app.use(pinia);

      // Mount when DOM is ready
      document.addEventListener('DOMContentLoaded', () => {
        app.mount('#team-view-app');
      });
    }
  </script>
</DashboardLayout>